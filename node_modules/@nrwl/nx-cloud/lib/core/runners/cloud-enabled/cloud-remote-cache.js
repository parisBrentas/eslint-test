const a2_0xcf96=['hashUrls','cacheError','Nx\x20Cloud:\x20Cache\x20miss\x20','runContext','apply','axiosException','Nx\x20Cloud:\x20Skipping\x20storing\x20','get','api','storage','indexOf','reduce','../../../utilities/nx-imports','defineProperty','startRun','hash','retrieve','forEach','remote-cache-hit','response','put','NX_CLOUD_DISTRIBUTED_EXECUTION_ID','__esModule','extractErrorMessage','VERBOSE_LOGGING','push','value','next','../../../utilities/environment','storeRequests','all','throw','store','.\x20Status\x20404.','CloudRemoteCache','fileStorage','resolve','then','.\x20Read\x20only\x20token\x20is\x20used.','messages','requests','cache-miss','map','statuses','done','note'];(function(_0x1a9eb6,_0xcf96f8){const _0x59fbb8=function(_0x5b7d63){while(--_0x5b7d63){_0x1a9eb6['push'](_0x1a9eb6['shift']());}};_0x59fbb8(++_0xcf96f8);}(a2_0xcf96,0x6a));const a2_0x59fb=function(_0x1a9eb6,_0xcf96f8){_0x1a9eb6=_0x1a9eb6-0x0;let _0x59fbb8=a2_0xcf96[_0x1a9eb6];return _0x59fbb8;};'use strict';var __awaiter=this&&this['__awaiter']||function(_0x22c27e,_0x332631,_0x49948b,_0x4827e9){function _0x2379ab(_0x4ac678){return _0x4ac678 instanceof _0x49948b?_0x4ac678:new _0x49948b(function(_0x396994){_0x396994(_0x4ac678);});}return new(_0x49948b||(_0x49948b=Promise))(function(_0x453070,_0x573c43){function _0x1da96a(_0x52a8c0){try{_0x56de3f(_0x4827e9[a2_0x59fb('0xd')](_0x52a8c0));}catch(_0x5b2acd){_0x573c43(_0x5b2acd);}}function _0x3e9d39(_0x41b4c8){try{_0x56de3f(_0x4827e9[a2_0x59fb('0x11')](_0x41b4c8));}catch(_0x421e95){_0x573c43(_0x421e95);}}function _0x56de3f(_0x4bc296){_0x4bc296[a2_0x59fb('0x1e')]?_0x453070(_0x4bc296[a2_0x59fb('0xc')]):_0x2379ab(_0x4bc296[a2_0x59fb('0xc')])[a2_0x59fb('0x17')](_0x1da96a,_0x3e9d39);}_0x56de3f((_0x4827e9=_0x4827e9[a2_0x59fb('0x24')](_0x22c27e,_0x332631||[]))['next']());});};Object[a2_0x59fb('0x2d')](exports,a2_0x59fb('0x8'),{'value':!![]});exports[a2_0x59fb('0x14')]=void 0x0;const environment_1=require(a2_0x59fb('0xe'));const {output}=require(a2_0x59fb('0x2c'));class CloudRemoteCache{constructor(_0xe5360c,_0xabaa14,_0x49d3a9,_0x350b36){this[a2_0x59fb('0x19')]=_0xe5360c;this[a2_0x59fb('0x28')]=_0xabaa14;this['runContext']=_0x49d3a9;this[a2_0x59fb('0x15')]=_0x350b36;this['storeRequests']=[];}[a2_0x59fb('0x2')](_0x39e1f5,_0x5ea1de){var _0x337e86;return __awaiter(this,void 0x0,void 0x0,function*(){if(this[a2_0x59fb('0x19')]['cacheError'])return![];const _0x3fab01=yield this[a2_0x59fb('0x20')](_0x39e1f5);if(!_0x3fab01||!_0x3fab01[a2_0x59fb('0x27')]){if(environment_1[a2_0x59fb('0xa')]){output[a2_0x59fb('0x1f')]({'title':a2_0x59fb('0x22')+_0x39e1f5+'.'});}this[a2_0x59fb('0x23')]['statuses'][_0x39e1f5]=a2_0x59fb('0x1b');return![];}try{yield this[a2_0x59fb('0x15')][a2_0x59fb('0x2')](_0x39e1f5,_0x3fab01[a2_0x59fb('0x27')],_0x5ea1de);this[a2_0x59fb('0x23')][a2_0x59fb('0x1d')][_0x39e1f5]=a2_0x59fb('0x4');return!![];}catch(_0x46c304){const _0x5a6841=(_0x337e86=_0x46c304['axiosException'])!==null&&_0x337e86!==void 0x0?_0x337e86:_0x46c304;if(_0x5a6841['response']&&_0x5a6841[a2_0x59fb('0x5')]['status']===0x194){if(environment_1[a2_0x59fb('0xa')]){output[a2_0x59fb('0x1f')]({'title':'Nx\x20Cloud:\x20Cache\x20miss\x20'+_0x39e1f5+a2_0x59fb('0x13')});}}else{this[a2_0x59fb('0x19')][a2_0x59fb('0x21')]=this[a2_0x59fb('0x19')][a2_0x59fb('0x9')](_0x5a6841,a2_0x59fb('0x29'));}this[a2_0x59fb('0x23')]['statuses'][_0x39e1f5]=a2_0x59fb('0x1b');return![];}});}[a2_0x59fb('0x12')](_0x211b0d,_0x400b45){return __awaiter(this,void 0x0,void 0x0,function*(){if(this[a2_0x59fb('0x19')]['cacheError'])return![];const _0x3ef9f1=Promise[a2_0x59fb('0x16')]()['then'](()=>__awaiter(this,void 0x0,void 0x0,function*(){var _0x1c044f;const _0x23bcfd=yield this[a2_0x59fb('0x20')](_0x211b0d);if(!_0x23bcfd)return![];if(!_0x23bcfd['put']){if(environment_1[a2_0x59fb('0xa')]){output[a2_0x59fb('0x1f')]({'title':a2_0x59fb('0x26')+_0x211b0d+a2_0x59fb('0x18')});}return!![];}try{yield this['fileStorage'][a2_0x59fb('0x12')](_0x211b0d,_0x23bcfd[a2_0x59fb('0x6')],_0x400b45);return!![];}catch(_0x419933){const _0x159c4c=(_0x1c044f=_0x419933[a2_0x59fb('0x25')])!==null&&_0x1c044f!==void 0x0?_0x1c044f:_0x419933;this[a2_0x59fb('0x19')]['cacheError']=this['messages'][a2_0x59fb('0x9')](_0x159c4c,'storage');return![];}}));this[a2_0x59fb('0xf')]['push'](_0x3ef9f1);return _0x3ef9f1;});}[a2_0x59fb('0x20')](_0x45332f){return __awaiter(this,void 0x0,void 0x0,function*(){if(_0x45332f in this[a2_0x59fb('0x23')][a2_0x59fb('0x1a')]){return(yield this[a2_0x59fb('0x23')][a2_0x59fb('0x1a')][_0x45332f])[_0x45332f];}else{const _0x4f41bc=this['runContext']['scheduledTasks']['filter'](_0x3e9f68=>!this[a2_0x59fb('0x23')][a2_0x59fb('0x1a')][_0x3e9f68[a2_0x59fb('0x1')]])[a2_0x59fb('0x1c')](_0x454f77=>_0x454f77[a2_0x59fb('0x1')]);if(_0x4f41bc[a2_0x59fb('0x2a')](_0x45332f)===-0x1){_0x4f41bc[a2_0x59fb('0xb')](_0x45332f);}const _0x517591=this[a2_0x59fb('0x28')][a2_0x59fb('0x0')](environment_1[a2_0x59fb('0x7')],_0x4f41bc);_0x4f41bc[a2_0x59fb('0x3')](_0x1dab55=>{this[a2_0x59fb('0x23')][a2_0x59fb('0x1a')][_0x1dab55]=_0x517591;});return(yield _0x517591)[_0x45332f];}});}['waitForStoreRequestsToComplete'](){return Promise[a2_0x59fb('0x10')](this[a2_0x59fb('0xf')])[a2_0x59fb('0x17')](_0xc4583b=>_0xc4583b[a2_0x59fb('0x2b')]((_0x364aba,_0x54a769)=>_0x364aba&&_0x54a769,!![]));}}exports[a2_0x59fb('0x14')]=CloudRemoteCache;