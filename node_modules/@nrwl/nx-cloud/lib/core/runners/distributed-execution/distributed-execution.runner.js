const a8_0x5306=['retrieve','executionId:\x20','axiosException','note','value','then','startTask','commandStatus','COMPLETED','reset','stdout','targetDependencies','../../../utilities/metric-logger','../../../utilities/create-unchanged-value-timeout','./distributed-execution.api','__awaiter','createTaskGraph','lifeCycle','createStartRequest','criticalErrorMessage','addVerticalSeparator','write','executionStatus','Command\x20execution\x20failed.','\x20seconds.','Found\x20unknown\x20task:\x20','url','FileStorage','get','dependencies','taskId','__esModule','message','completedTasks','VERBOSE_LOGGING','project','hash','splitTasksIntoStages','length','./task-graph-creator','No\x20new\x20completed\x20tasks\x20after\x20','Main\x20job\x20terminated\x20with\x20an\x20error:\x20\x22','status','assign','readFileSync','exit','Retrieving\x20artifacts\x20from\x20','../../../utilities/nx-imports','strip-json-comments','Unable\x20to\x20complete\x20a\x20run.','ErrorReporterApi','SIGTERM','run','number\x20of\x20completed\x20tasks:\x20','/nx.json','../../error/print-run-group-error','taskGraph','build','configuration','Error:','See\x20run\x20details\x20at\x20','next','NO_COMPLETED_TASKS_TIMEOUT','error:\x20','TaskGraphCreator','Status\x20update','getRunGroup','terminalOutput','./split-task-graph-into-stages','../../file-storage/e2e-encryption','../../../utilities/waiter','endTask','push','target','Processing\x20task\x20','projectGraph','defineProperty','runUrl','ENCRYPTION_KEY','../../../utilities/environment','throw','../../file-storage/file-storage','Successfully\x20completed\x20running\x20the\x20command.','done','logCommand','error','Starting\x20distributed\x20command\x20execution','parse','completeRunGroupWithError','strictlyOrderedTargets','apply','Distributed\x20Execution\x20Terminated','tasks','nxCloudDistributedTasksRunner','log','SIGINT','executionStatus:\x20'];(function(_0x1810c7,_0x5306e2){const _0x20fd58=function(_0x22c253){while(--_0x22c253){_0x1810c7['push'](_0x1810c7['shift']());}};_0x20fd58(++_0x5306e2);}(a8_0x5306,0xc9));const a8_0x20fd=function(_0x1810c7,_0x5306e2){_0x1810c7=_0x1810c7-0x0;let _0x20fd58=a8_0x5306[_0x1810c7];return _0x20fd58;};'use strict';var __awaiter=this&&this[a8_0x20fd('0x8')]||function(_0x417e53,_0x17f2ee,_0x369ce1,_0x4804dc){function _0x14bcc4(_0x155a74){return _0x155a74 instanceof _0x369ce1?_0x155a74:new _0x369ce1(function(_0xcf8285){_0xcf8285(_0x155a74);});}return new(_0x369ce1||(_0x369ce1=Promise))(function(_0x4059d2,_0xe90140){function _0x1e9425(_0x449e46){try{_0x14239e(_0x4804dc[a8_0x20fd('0x36')](_0x449e46));}catch(_0xc37ef4){_0xe90140(_0xc37ef4);}}function _0x11d725(_0x527811){try{_0x14239e(_0x4804dc[a8_0x20fd('0x49')](_0x527811));}catch(_0x1d7eec){_0xe90140(_0x1d7eec);}}function _0x14239e(_0x22504e){_0x22504e[a8_0x20fd('0x4c')]?_0x4059d2(_0x22504e[a8_0x20fd('0x5e')]):_0x14bcc4(_0x22504e[a8_0x20fd('0x5e')])[a8_0x20fd('0x5f')](_0x1e9425,_0x11d725);}_0x14239e((_0x4804dc=_0x4804dc[a8_0x20fd('0x53')](_0x417e53,_0x17f2ee||[]))[a8_0x20fd('0x36')]());});};Object[a8_0x20fd('0x45')](exports,a8_0x20fd('0x18'),{'value':!![]});exports[a8_0x20fd('0x56')]=void 0x0;const fs_1=require('fs');const stripJsonComments=require(a8_0x20fd('0x29'));const create_unchanged_value_timeout_1=require(a8_0x20fd('0x6'));const environment_1=require(a8_0x20fd('0x48'));const metric_logger_1=require(a8_0x20fd('0x5'));const serializer_overrides_1=require('../../../utilities/serializer-overrides');const waiter_1=require(a8_0x20fd('0x3f'));const error_reporter_api_1=require('../../api/error-reporter.api');const print_run_group_error_1=require(a8_0x20fd('0x30'));const e2e_encryption_1=require(a8_0x20fd('0x3e'));const file_storage_1=require(a8_0x20fd('0x4a'));const distributed_execution_api_1=require(a8_0x20fd('0x7'));const split_task_graph_into_stages_1=require(a8_0x20fd('0x3d'));const task_graph_creator_1=require(a8_0x20fd('0x20'));const {output,workspaceRoot,getOutputs,Cache}=require(a8_0x20fd('0x28'));class NoopLifeCycle{['scheduleTask'](_0x371d30){}[a8_0x20fd('0x60')](_0x2ff4e4){}[a8_0x20fd('0x40')](_0x3b95dc,_0x67da07){}}function runDistributedExecution(_0x1b9371,_0x555ef9,_0x6b976f,_0x12e4f8,_0x39bfd9,_0x521726,_0x15e940){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x38408b=yield _0x1b9371['start']((0x0,distributed_execution_api_1[a8_0x20fd('0xb')])(_0x521726,(0x0,split_task_graph_into_stages_1[a8_0x20fd('0x1e')])(_0x15e940),_0x555ef9));return yield processTasks(_0x1b9371,_0x12e4f8,_0x39bfd9,_0x555ef9,_0x38408b,Object['values'](_0x15e940[a8_0x20fd('0x55')]),_0x6b976f);});}function processTasks(_0x3522cc,_0x356fe9,_0x17dbd3,_0x2b2fd7,_0x256aaf,_0x4b4519,_0x1401d0){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x52dbb9={};const _0x2db9ad=(0x0,create_unchanged_value_timeout_1['createUnchangedValueTimeout'])({'title':a8_0x20fd('0x21')+environment_1[a8_0x20fd('0x37')]/0x3e8+a8_0x20fd('0x11'),'timeout':environment_1[a8_0x20fd('0x37')]});const _0x1aed82=new waiter_1['Waiter']();while(!![]){if(environment_1[a8_0x20fd('0x1b')]){output[a8_0x20fd('0x5d')]({'title':'Waiting...'});}yield _0x1aed82['wait']();const _0x576f79=yield _0x3522cc[a8_0x20fd('0x23')](_0x256aaf);if(environment_1[a8_0x20fd('0x1b')]){output[a8_0x20fd('0x5d')]({'title':a8_0x20fd('0x3a'),'bodyLines':[a8_0x20fd('0x5b')+_0x256aaf,a8_0x20fd('0x59')+_0x576f79[a8_0x20fd('0xf')],a8_0x20fd('0x2e')+_0x576f79[a8_0x20fd('0x1a')][a8_0x20fd('0x1f')],a8_0x20fd('0x38')+_0x576f79[a8_0x20fd('0xc')]]});}if(_0x576f79[a8_0x20fd('0xc')]){output['error']({'title':a8_0x20fd('0x54'),'bodyLines':[a8_0x20fd('0x34'),_0x576f79[a8_0x20fd('0xc')]]});process[a8_0x20fd('0x26')](0x1);}_0x2db9ad(_0x576f79[a8_0x20fd('0x1a')][a8_0x20fd('0x1f')]);for(const _0x3eb1ce of _0x576f79[a8_0x20fd('0x1a')]){if(_0x52dbb9[_0x3eb1ce[a8_0x20fd('0x17')]])continue;yield processTask(_0x356fe9,_0x17dbd3,_0x1401d0,_0x2b2fd7,_0x4b4519,_0x3eb1ce);_0x1aed82[a8_0x20fd('0x2')]();_0x52dbb9[_0x3eb1ce['taskId']]=!![];}if(_0x576f79[a8_0x20fd('0xf')]===a8_0x20fd('0x1')){return{'commandStatus':_0x576f79['commandStatus'],'runUrl':_0x576f79[a8_0x20fd('0x46')]};}}});}function processTask(_0x128d49,_0x4578d3,_0x215035,_0x5163a6,_0x406148,_0x42f469){return __awaiter(this,void 0x0,void 0x0,function*(){if(environment_1[a8_0x20fd('0x1b')]){output['note']({'title':a8_0x20fd('0x43')+_0x42f469[a8_0x20fd('0x17')]});}const _0x13340e=_0x406148['find'](_0x39daec=>_0x42f469[a8_0x20fd('0x17')]===_0x39daec['id']);if(!_0x13340e){throw new Error(a8_0x20fd('0x12')+_0x42f469[a8_0x20fd('0x17')]);}if(environment_1[a8_0x20fd('0x1b')]){output['note']({'title':a8_0x20fd('0x27')+_0x42f469[a8_0x20fd('0x13')]});}yield _0x128d49[a8_0x20fd('0x5a')](_0x42f469[a8_0x20fd('0x1d')],_0x42f469[a8_0x20fd('0x13')],_0x5163a6['cacheDirectory']||'./node_modules/.cache/nx');const _0x479722=yield _0x4578d3[a8_0x20fd('0x15')](Object[a8_0x20fd('0x24')](Object['assign']({},_0x13340e),{'hash':_0x42f469[a8_0x20fd('0x1d')]}));const _0xdc398=getOutputs(_0x215035[a8_0x20fd('0x44')]['nodes'],_0x13340e);if(environment_1[a8_0x20fd('0x1b')]){output[a8_0x20fd('0x5d')]({'title':'Extracting\x20artifacts','bodyLines':_0xdc398});}yield _0x4578d3['copyFilesFromCache'](_0x42f469[a8_0x20fd('0x1d')],_0x479722,_0xdc398);output[a8_0x20fd('0x4d')](getCommand(_0x13340e));process[a8_0x20fd('0x3')][a8_0x20fd('0xe')](_0x479722[a8_0x20fd('0x3c')]);output[a8_0x20fd('0xd')]();});}function getCommand(_0x34e9c1){const _0x25e408=_0x34e9c1[a8_0x20fd('0x42')][a8_0x20fd('0x33')]?':'+_0x34e9c1[a8_0x20fd('0x42')][a8_0x20fd('0x33')]:'';return['nx',a8_0x20fd('0x2d'),_0x34e9c1['target'][a8_0x20fd('0x1c')]+':'+_0x34e9c1[a8_0x20fd('0x42')][a8_0x20fd('0x42')]+_0x25e408,(0x0,serializer_overrides_1['serializeOverrides'])(_0x34e9c1)]['join']('\x20');}function attachSignalListenersToCompleteRunGroupOnError(_0x850bb2,_0x486862){process['on'](a8_0x20fd('0x58'),()=>__awaiter(this,void 0x0,void 0x0,function*(){yield _0x850bb2[a8_0x20fd('0x51')](_0x486862,'Main\x20job\x20was\x20terminated\x20via\x20SIGINT');process[a8_0x20fd('0x26')](0x1);}));process['on'](a8_0x20fd('0x2c'),()=>__awaiter(this,void 0x0,void 0x0,function*(){yield _0x850bb2[a8_0x20fd('0x51')](_0x486862,'Main\x20job\x20was\x20terminated\x20via\x20SIGTERM');process[a8_0x20fd('0x26')](0x1);}));}const nxCloudDistributedTasksRunner=(_0x1148fb,_0x43a5c1,_0x244a1e)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){if(environment_1[a8_0x20fd('0x1b')]){output[a8_0x20fd('0x5d')]({'title':a8_0x20fd('0x4f')});}_0x43a5c1[a8_0x20fd('0xa')]=new NoopLifeCycle();const _0x16c9a5=(0x0,environment_1[a8_0x20fd('0x3b')])();if(!_0x16c9a5){(0x0,print_run_group_error_1['printRunGroupError'])();return process[a8_0x20fd('0x26')](0x1);}const _0x88ae26=new e2e_encryption_1['E2EEncryption'](environment_1[a8_0x20fd('0x47')]||_0x43a5c1['encryptionKey']);const _0xa1be0c=new error_reporter_api_1[(a8_0x20fd('0x2b'))](_0x43a5c1);const _0x351f75=new file_storage_1[(a8_0x20fd('0x14'))](_0x88ae26,_0xa1be0c,!![],![]);const _0x4460df=new Cache(_0x43a5c1);const _0x5d8e19=new distributed_execution_api_1['DistributedExecutionApi'](_0x43a5c1);attachSignalListenersToCompleteRunGroupOnError(_0x5d8e19,_0x16c9a5);try{const _0x31216c=getTaskGraph(_0x244a1e,_0x1148fb,_0x43a5c1);const _0x1916c1=yield runDistributedExecution(_0x5d8e19,_0x43a5c1,_0x244a1e,_0x351f75,_0x4460df,_0x16c9a5,_0x31216c);if(_0x1916c1[a8_0x20fd('0x0')]===0x0){output['success']({'title':a8_0x20fd('0x4b'),'bodyLines':['See\x20run\x20details\x20at\x20'+_0x1916c1[a8_0x20fd('0x46')]]});}else{output['error']({'title':a8_0x20fd('0x10'),'bodyLines':[a8_0x20fd('0x35')+_0x1916c1[a8_0x20fd('0x46')]]});}yield(0x0,metric_logger_1['submitRunMetrics'])(_0x43a5c1);process['exit'](_0x1916c1[a8_0x20fd('0x0')]);}catch(_0x30acc3){output[a8_0x20fd('0x4e')]({'title':a8_0x20fd('0x2a'),'bodyLines':[_0x30acc3['message']]});if(_0x30acc3[a8_0x20fd('0x5c')]){console[a8_0x20fd('0x57')](_0x30acc3[a8_0x20fd('0x5c')]);}else{console['log'](_0x30acc3);}try{yield _0x5d8e19[a8_0x20fd('0x51')](_0x16c9a5,a8_0x20fd('0x22')+_0x30acc3[a8_0x20fd('0x19')]+'\x22');}finally{process[a8_0x20fd('0x26')](0x1);}}});exports[a8_0x20fd('0x56')]=nxCloudDistributedTasksRunner;function getTaskGraph(_0x2de77c,_0x187502,_0x4c67eb){if(_0x2de77c['taskGraph']){return _0x2de77c[a8_0x20fd('0x31')];}else{const _0x258e6c=JSON[a8_0x20fd('0x50')](stripJsonComments((0x0,fs_1[a8_0x20fd('0x25')])(workspaceRoot+a8_0x20fd('0x2f'))['toString']()));return new task_graph_creator_1[(a8_0x20fd('0x39'))](_0x2de77c[a8_0x20fd('0x44')],getDefaultDependencyConfigs(_0x258e6c,_0x4c67eb))[a8_0x20fd('0x9')](_0x187502);}}function getDefaultDependencyConfigs(_0x204298,_0x2946d6){var _0x2dc630,_0x1d4e5e;const _0x339348=(_0x2dc630=_0x204298[a8_0x20fd('0x4')])!==null&&_0x2dc630!==void 0x0?_0x2dc630:{};const _0x1740e7=_0x2946d6?(_0x1d4e5e=_0x2946d6[a8_0x20fd('0x52')])!==null&&_0x1d4e5e!==void 0x0?_0x1d4e5e:[a8_0x20fd('0x32')]:[];for(const _0x488c79 of _0x1740e7){_0x339348[_0x488c79]=_0x339348[_0x488c79]||[];_0x339348[_0x488c79][a8_0x20fd('0x41')]({'target':_0x488c79,'projects':a8_0x20fd('0x16')});}return _0x339348;}