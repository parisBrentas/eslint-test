"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const tslib_1 = require("tslib");
const devkit_1 = require("@nrwl/devkit");
function default_1(tree) {
    var _a;
    return tslib_1.__awaiter(this, void 0, void 0, function* () {
        const workspaceConfiguration = (0, devkit_1.readWorkspaceConfiguration)(tree);
        const globalBabelFile = ['babel.config.js', 'babel.config.json'].find((file) => tree.exists(file));
        if (globalBabelFile && ((_a = workspaceConfiguration.namedInputs) === null || _a === void 0 ? void 0 : _a.sharedGlobals)) {
            const sharedGlobalFileset = new Set(workspaceConfiguration.namedInputs.sharedGlobals);
            sharedGlobalFileset.add((0, devkit_1.joinPathFragments)('{workspaceRoot}', globalBabelFile));
            workspaceConfiguration.namedInputs.sharedGlobals =
                Array.from(sharedGlobalFileset);
        }
        (0, devkit_1.updateWorkspaceConfiguration)(tree, workspaceConfiguration);
        yield (0, devkit_1.formatFiles)(tree);
    });
}
exports.default = default_1;
//# sourceMappingURL=add-babel-inputs.js.map