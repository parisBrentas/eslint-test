"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.runCommand = void 0;
const tslib_1 = require("tslib");
const core_1 = require("@nx-tools/core");
const console_1 = require("console");
const extractArgs = (options) => {
    const args = [];
    for (const [key, value] of Object.entries(options)) {
        if (key !== 'options') {
            args.push(`--${key}=${value}`);
        }
    }
    return args;
};
const extractFlags = (options = {}) => {
    const flags = [];
    for (const [key, value] of Object.entries(options)) {
        if (value) {
            flags.push(`--${key}`);
        }
    }
    return flags;
};
const runCommand = ({ description, command }, options) => (0, tslib_1.__awaiter)(void 0, void 0, void 0, function* () {
    (0, core_1.startGroup)(description, 'Nx Prisma');
    const commandArgs = extractArgs(options);
    const commandFlags = extractFlags(options.options);
    const args = [...commandArgs, ...commandFlags];
    (0, console_1.info)(`Running: ${command} ${args}`);
    yield (0, core_1.exec)(command, args);
    return { success: true };
});
exports.runCommand = runCommand;
//# sourceMappingURL=run-commands.js.map